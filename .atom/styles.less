/*
 * Your Stylesheet
 *
 * This stylesheet is loaded when Atom starts up and is reloaded automatically
 * when it is changed and saved.
 *
 * Add your own CSS or Less to fully customize Atom.
 * If you are unfamiliar with Less, you can read more about it here:
 * http://lesscss.org
 */

@bgcolor: hsl(216, 30%, 12%);
@hlcolor: #3e4451;

// style the editor and treeview
atom-text-editor,
.tool-panel.tool-panel {
  background-color: @bgcolor;
}

// line focused
atom-text-editor .line.cursor-line,
atom-text-editor.is-focused .line.cursor-line {
    background-color: @hlcolor;

    &>.syntax--source {
      background-color: black;

      .leading-whitespace {
        background-color: @hlcolor;
      }
    }
}

atom-text-editor.editor {
  // Comments get a different font,. but stay aligned
  // .syntax--comment {
  //   color: #777 !important;
  //
  //   &:not(.syntax--punctuation) {
  //     font-family: 'NovaMono', monospace !important;
  //   }
  // }
  .line-number.cursor-line {
    // background-color: @hlcolor;
    color: #ccc;
  }

  // highlight fix

  // .quick-highlight.box-selection .region {
  //   background-color: transparent;
  //   border-width: 1px;
  //   border-color: yellow;
  //
  //   // above a comment background
  //   z-index: 1;
  // }
  //
  // .minimap .mini-quick-hl.box-selection {
  //   background-color: yellow;
  // }

  .quick-highlight .region {
    // above a comment background
    z-index: 1;
  }

}

// la branche git ressort un peu du reste en bleu
.github-branch {
  color: #77f;
}

// tab backgrounds
atom-pane .tab-bar {
  background: @bgcolor;

  .tab.active {
    background: @hlcolor;
  }
}


// BIGGER Vim mode indication
.status-bar-vim-mode-plus-normal,
.status-bar-vim-mode-plus-insert,
.status-bar-vim-mode-plus-visual,
.status-bar-vim-mode-plus-operator-pending {
  text-align: center;
  font-size: 1.5em;
  width: 2rem;
}

// minimap
// atom-text-editor atom-text-editor-minimap .minimap-visible-area::after {
//   background-color: rgba(80, 80, 80, 0.7);
// }

// linter and tree-view
.tree-view {
  .linter-error,
  .linter-warning {
    top: 0;
    left: -1.9rem;
    width: 1.2rem;
    height: 1.2rem;
    position: absolute;
    background: red;
    border: none;
    border-radius: 50%;
  }

  .linter-warning {
    background: yellow;
  }
}

// Vim cursor
.cursor-base () {
  border: none;
  background: none;
  opacity: 1;
}

.block-cursor(@bgcolor) {
  .cursor-base();
  background-color: @bgcolor;
  border-bottom: .2em solid white;
}
.underline-cursor(@visibility) {
  .cursor-base();
  border-bottom: .3em solid white;
  visibility: @visibility;
}
atom-text-editor.vim-mode-plus {
  &.normal-mode,.visual-mode {
    &.is-focused {
      .cursor {
        .block-cursor(rgba(255,255,255,.4));
      }
      .cursors.blink-off .cursor {
        .block-cursor(inherit);
      }
    }
  }

  &.insert-mode.replace {
    &.is-focused {
      .cursor {
        .underline-cursor(visible);
      }
      .cursors.blink-off .cursor {
        .underline-cursor(hidden);
      }
    }
  }
}
// Vim search/star highlight
atom-text-editor .vim-mode-plus-highlight-search .region {
    border-radius: 0;
    border: 1px solid rgb(192, 82, 244);
    background-color: inherit;
    z-index: 1;
}

// Fix invisble linter highlight on current line
atom-text-editor.editor .linter-highlight .region {
  z-index: 1;
}

// Hide ugly useless linter gutter
.gutter[gutter-name="linter-ui-default"] {
  display: none;
}
// Reduce gutter size
atom-text-editor .gutter.git-diff-icon .line-number {
  padding-left: 0;
}
// Remove useless 'project' tab
.list-inline.tab-bar.inset-panel[location="left"] {
  display: none;
}
// Make tab close icon always a bit visible
atom-pane .tab-bar .tab .close-icon {
  opacity: .5;
}

// Reduce the left padding used for the file tree
.list-tree li {
  padding-left: .8rem !important;
}
